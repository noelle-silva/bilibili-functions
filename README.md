# Bilibili è‡ªå®šä¹‰æŒ‰é’®æ‰©å±•

ä¸€ä¸ªä¸º Bilibili è§†é¢‘é¡µé¢æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½æŒ‰é’®çš„ Chrome æ‰©å±•ã€‚æ”¯æŒæ¨¡å—åŒ–ã€çƒ­æ’æ‹”çš„åŠŸèƒ½æ‰©å±•ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ å½“å‰åŠŸèƒ½

1. **å¤åˆ¶å­—å¹•** ğŸ“‹
   - ä¸€é”®å¤åˆ¶å½“å‰è§†é¢‘çš„å­—å¹•åˆ°å‰ªè´´æ¿
   - è‡ªåŠ¨é€‰æ‹©ä¸­æ–‡å­—å¹•ï¼ˆä¼˜å…ˆç®€ä½“ä¸­æ–‡ï¼‰
   - çº¯æ–‡æœ¬æ ¼å¼ï¼Œæ–¹ä¾¿ç²˜è´´ä½¿ç”¨

2. **æ‰¹é‡ä¸‹è½½å­—å¹•** ğŸ“¥
   - æ”¯æŒå¤šPè§†é¢‘çš„å­—å¹•æ‰¹é‡ä¸‹è½½
   - å¯è§†åŒ–é€‰æ‹©è¦ä¸‹è½½çš„åˆ†P
   - è‡ªåŠ¨ä¿å­˜ä¸º TXT æ–‡ä»¶
   - æ–‡ä»¶ååŒ…å«è§†é¢‘æ ‡é¢˜å’Œåˆ†Pä¿¡æ¯

### ğŸ—ï¸ æ¶æ„ç‰¹ç‚¹

- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½éƒ½æ˜¯ç‹¬ç«‹çš„æ¨¡å—
- âœ… **çƒ­æ’æ‹”æ”¯æŒ**ï¼šå¯éšæ—¶å¯ç”¨/ç¦ç”¨åŠŸèƒ½æ¨¡å—
- âœ… **é…ç½®ç®¡ç†**ï¼šæä¾›å‹å¥½çš„é…ç½®é¡µé¢
- âœ… **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ TypeScript å¼€å‘
- âœ… **ç°ä»£æ„å»º**ï¼šåŸºäº Vite æ„å»º

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 18
- npm >= 9

### å®‰è£…ä¾èµ–

```bash
npm install
```

### å¼€å‘æ¨¡å¼

```bash
npm run dev
```

### æ„å»ºæ‰©å±•

```bash
npm run build
```

æ„å»ºäº§ç‰©ä¼šè¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

### åŠ è½½åˆ° Chrome

1. æ‰“å¼€ Chrome æµè§ˆå™¨
2. è¿›å…¥ `chrome://extensions/`
3. å¼€å¯å³ä¸Šè§’çš„"å¼€å‘è€…æ¨¡å¼"
4. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
5. é€‰æ‹©é¡¹ç›®çš„ `dist` ç›®å½•

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ä½¿ç”¨

1. å®‰è£…æ‰©å±•åï¼Œè®¿é—®ä»»æ„ Bilibili è§†é¢‘é¡µé¢
2. åœ¨è§†é¢‘ä¸‹æ–¹çš„æ“ä½œæŒ‰é’®åŒºåŸŸï¼ˆç‚¹èµã€æŠ•å¸ç­‰ä½ç½®ï¼‰ä¼šè‡ªåŠ¨æ˜¾ç¤ºè‡ªå®šä¹‰æŒ‰é’®
3. ç‚¹å‡»æŒ‰é’®å³å¯ä½¿ç”¨å¯¹åº”åŠŸèƒ½

### é…ç½®ç®¡ç†

1. ç‚¹å‡» Chrome æ‰©å±•å›¾æ ‡ï¼Œé€‰æ‹©"é€‰é¡¹"
2. åœ¨é…ç½®é¡µé¢å¯ä»¥å¼€å¯/å…³é—­ç‰¹å®šåŠŸèƒ½æ¨¡å—
3. é…ç½®å®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€åˆ·æ–°é¡µé¢

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
bilibili-buttons/
â”œâ”€â”€ manifest.json          # Chrome æ‰©å±•é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ types.ts       # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ButtonManager.ts   # æŒ‰é’®ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ DOMInjector.ts     # DOM æ³¨å…¥å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/           # åŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ subtitle-copy/     # å­—å¹•å¤åˆ¶
â”‚   â”‚   â””â”€â”€ batch-download/    # æ‰¹é‡ä¸‹è½½
â”‚   â”‚
â”‚   â”œâ”€â”€ content/           # Content Script
â”‚   â”œâ”€â”€ background/        # Background Service Worker
â”‚   â”œâ”€â”€ options/           # é…ç½®é¡µé¢
â”‚   â”‚
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ api.ts         # Bilibili API
â”‚       â”œâ”€â”€ dom.ts         # DOM æ“ä½œ
â”‚       â””â”€â”€ storage.ts     # å­˜å‚¨ç®¡ç†
â”‚
â””â”€â”€ public/
    â””â”€â”€ icons/             # æ‰©å±•å›¾æ ‡
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

1. åœ¨ `src/modules/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. å®ç° `ButtonModule` æ¥å£ï¼š

```typescript
import type { ButtonModule } from '@/core/types';

export const myModule: ButtonModule = {
  id: 'my-module',
  name: 'æˆ‘çš„åŠŸèƒ½',
  description: 'åŠŸèƒ½æè¿°',

  button: {
    text: 'æŒ‰é’®æ–‡å­—',
    icon: 'ğŸ¨',
    position: 300,
  },

  async execute(context) {
    // å®ç°åŠŸèƒ½é€»è¾‘
    console.log('è§†é¢‘ä¿¡æ¯:', context.videoInfo);
  },

  enabled: true,
};
```

3. åœ¨ `src/content/index.ts` ä¸­æ³¨å†Œæ¨¡å—ï¼š

```typescript
import { myModule } from '@/modules/my-module';
buttonManager.register(myModule);
```

4. åœ¨ `src/options/index.ts` ä¸­æ·»åŠ æ¨¡å—é…ç½®ï¼š

```typescript
const MODULES = [
  // ...
  {
    id: 'my-module',
    name: 'æˆ‘çš„åŠŸèƒ½',
    icon: 'ğŸ¨',
    description: 'åŠŸèƒ½æè¿°',
  },
];
```

### Bilibili API è¯´æ˜

é¡¹ç›®å°è£…äº†å¸¸ç”¨çš„ Bilibili APIï¼š

- `extractVideoInfo(url)` - ä» URL æå–è§†é¢‘ä¿¡æ¯
- `getVideoPageList(bvid, aid)` - è·å–åˆ†Påˆ—è¡¨
- `getSubtitleList(cid, bvid, aid)` - è·å–å­—å¹•åˆ—è¡¨
- `fetchSubtitleFile(url)` - ä¸‹è½½å­—å¹•æ–‡ä»¶
- `getVideoSubtitleText(cid, bvid, aid)` - è·å–å­—å¹•çº¯æ–‡æœ¬

è¯¦è§ `src/utils/api.ts`ã€‚

## ğŸ“ æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒ**ï¼šTypeScriptã€Chrome Extension Manifest V3
- **æ„å»º**ï¼šViteã€@crxjs/vite-plugin
- **æ ·å¼**ï¼šåŸç”Ÿ CSSï¼ˆMaterial Design é£æ ¼ï¼‰
- **API**ï¼šBilibili Web API

## ğŸ¨ è®¾è®¡ç†å¿µ

- **åŸç”Ÿèåˆ**ï¼šæŒ‰é’®æ ·å¼ä¸ Bilibili åŸç”ŸæŒ‰é’®ä¿æŒä¸€è‡´
- **æ€§èƒ½ä¼˜å…ˆ**ï¼šè½»é‡çº§å®ç°ï¼Œä¸å½±å“é¡µé¢åŠ è½½é€Ÿåº¦
- **ç”¨æˆ·å‹å¥½**ï¼šç®€æ´ç›´è§‚çš„äº¤äº’ï¼Œæä¾›å³æ—¶åé¦ˆ
- **å¯æ‰©å±•æ€§**ï¼šæ¨¡å—åŒ–æ¶æ„ï¼Œæ–¹ä¾¿æ·»åŠ æ–°åŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## âš ï¸ å…è´£å£°æ˜

æœ¬æ‰©å±•ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆ Bilibili çš„ç”¨æˆ·åè®®å’Œç›¸å…³æ³•å¾‹æ³•è§„ã€‚
